{"version":3,"file":"static/js/617.b2568705.chunk.js","mappings":"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","sources":["Firebase.js","components/auth/SignUp.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport { getAuth } from \"firebase/auth\"; // Import for Firebase Authentication\r\nimport { getFirestore } from \"firebase/firestore\";\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAHRhokxKTBDdkP7dP-NScIMWTWju7QL04\",\r\n  authDomain: \"lifttrackerlog.firebaseapp.com\",\r\n  projectId: \"lifttrackerlog\",\r\n  storageBucket: \"lifttrackerlog.appspot.com\",\r\n  messagingSenderId: \"226013600119\",\r\n  appId: \"1:226013600119:web:d02ac2fa2ef168c0b1e972\",\r\n  measurementId: \"G-2XD32MGXTL\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst analytics = getAnalytics(app);    \r\nconst auth = getAuth(app); // Initialize Firebase Authentication\r\n\r\nexport { auth }; // Export the auth object for use in your app\r\nexport const firestore = getFirestore(app); // Initialize and export Firestore","import React, { useState, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { createUserWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth, firestore } from '../../Firebase';\r\nimport { AuthContext } from './UserContext';\r\nimport { collection, doc, setDoc } from 'firebase/firestore'; // Import Firestore methods\r\n\r\nconst SignUp = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [signInError, setSignInError] = useState('');\r\n\r\n  const navigate = useNavigate();\r\n  const { setUser } = useContext(AuthContext);\r\n\r\n  const handleSignUp = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      setUser(userCredential.user); // Set the user in the context\r\n      navigate('/'); // Navigate to the dashboard or home page after sign up\r\n    \r\n      // Check for existing local storage data\r\n      const localData = localStorage.getItem('workouts');\r\n      if (localData) {\r\n        const userData = JSON.parse(localData);\r\n        console.log(\"Attempting to write to Firestore: \", userData); // Make sure this line logs\r\n        if(userData) {\r\n          console.log(\"User data from localStorage: \", userData);\r\n          // Migrate local data to user's account in Firestore\r\n          try {\r\n            await setDoc(doc(firestore, 'users', userCredential.user.uid), userData);\r\n            console.log(\"Data written to Firestore\"); // Check if this gets logged\r\n          } catch (error) {\r\n            console.error(\"Error writing to Firestore: \", error);\r\n          } \r\n        // Clear local storage\r\n        // localStorage.removeItem('workoutData');\r\n        } else {\r\n          console.log(\"No user data found in localStorage\")\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"Sign Up error\", error);\r\n\r\n            // Custom error message for the user\r\n      let errorMessage = '';\r\n      if (error.code === 'auth/invalid-email') {\r\n        errorMessage = 'Invalid email format.';\r\n      } else if (error.code === 'auth/email-already-in-use') {\r\n        errorMessage = 'This account is already in use.';\r\n      } else if (error.code === 'auth/invalid-login-credentials' || error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {\r\n        errorMessage = 'Incorrect email or password.';\r\n      } else {\r\n        errorMessage = 'An error occurred during login. Please try again.';\r\n      }\r\n\r\n      setSignInError(errorMessage); // Set the custom error message\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Sign Up</h1>\r\n      <form onSubmit={handleSignUp}>\r\n      <label htmlFor=\"new-email\">Email</label>\r\n        <input \r\n          id=\"new-email\"\r\n          type=\"email\" \r\n          name='new-email'\r\n          autoComplete='new-email'\r\n          value={email} \r\n          onChange={(e) => setEmail(e.target.value)} \r\n          placeholder=\"Email\" \r\n        />\r\n        <label htmlFor=\"new-password\">Password</label>\r\n        <input \r\n          id=\"new-password\"\r\n          type=\"password\"\r\n          name='new-password'\r\n          autoComplete='new-password'  \r\n          value={password} \r\n          onChange={(e) => setPassword(e.target.value)} \r\n          placeholder=\"Password\" \r\n        />\r\n        <button type=\"submit\">Sign Up</button>\r\n        {signInError && <p style={{ color: 'grey' }}>{signInError}</p>} {/* Display the error message */}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default SignUp;\r\n"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAnalytics","getAuth","firestore","getFirestore","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","signInError","setSignInError","navigate","useNavigate","setUser","useContext","AuthContext","handleSignUp","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","userCredential","localData","userData","errorMessage","wrap","_context","prev","next","preventDefault","createUserWithEmailAndPassword","sent","user","localStorage","getItem","JSON","parse","console","log","setDoc","doc","uid","t0","error","t1","code","stop","_x","apply","arguments","_jsxs","children","_jsx","onSubmit","htmlFor","id","type","name","autoComplete","value","onChange","target","placeholder","style","color"],"sourceRoot":""}