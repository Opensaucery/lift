{"version":3,"file":"static/js/617.6ae9a98a.chunk.js","mappings":"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","sources":["components/auth/SignUp.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { createUserWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth, firestore } from '../../Firebase';\r\nimport { AuthContext } from './UserContext';\r\nimport { collection, doc, setDoc } from 'firebase/firestore'; // Import Firestore methods\r\n\r\nconst SignUp = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [signInError, setSignInError] = useState('');\r\n\r\n  const navigate = useNavigate();\r\n  const { setUser } = useContext(AuthContext);\r\n\r\n  const handleSignUp = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      setUser(userCredential.user); // Set the user in the context\r\n      navigate('/'); // Navigate to the dashboard or home page after sign up\r\n    \r\n      // Check for existing local storage data\r\n      const localData = localStorage.getItem('workouts');\r\n      if (localData) {\r\n        const userData = JSON.parse(localData);\r\n        console.log(\"Attempting to write to Firestore: \", userData); // Make sure this line logs\r\n        if(userData) {\r\n          console.log(\"User data from localStorage: \", userData);\r\n          // Migrate local data to user's account in Firestore\r\n          try {\r\n            await setDoc(doc(firestore, 'users', userCredential.user.uid), userData);\r\n            console.log(\"Data written to Firestore\"); // Check if this gets logged\r\n          } catch (error) {\r\n            console.error(\"Error writing to Firestore: \", error);\r\n          } \r\n        // Clear local storage\r\n        // localStorage.removeItem('workoutData');\r\n        } else {\r\n          console.log(\"No user data found in localStorage\")\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"Sign Up error\", error);\r\n\r\n            // Custom error message for the user\r\n      let errorMessage = '';\r\n      if (error.code === 'auth/invalid-email') {\r\n        errorMessage = 'Invalid email format.';\r\n      } else if (error.code === 'auth/email-already-in-use') {\r\n        errorMessage = 'This account is already in use.';\r\n      } else if (error.code === 'auth/invalid-login-credentials' || error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {\r\n        errorMessage = 'Incorrect email or password.';\r\n      } else {\r\n        errorMessage = 'An error occurred during login. Please try again.';\r\n      }\r\n\r\n      setSignInError(errorMessage); // Set the custom error message\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Sign Up</h1>\r\n      <form onSubmit={handleSignUp}>\r\n      <label htmlFor=\"new-email\">Email</label>\r\n        <input \r\n          id=\"new-email\"\r\n          type=\"email\" \r\n          name='new-email'\r\n          autoComplete='new-email'\r\n          value={email} \r\n          onChange={(e) => setEmail(e.target.value)} \r\n          placeholder=\"Email\" \r\n        />\r\n        <label htmlFor=\"new-password\">Password</label>\r\n        <input \r\n          id=\"new-password\"\r\n          type=\"password\"\r\n          name='new-password'\r\n          autoComplete='new-password'  \r\n          value={password} \r\n          onChange={(e) => setPassword(e.target.value)} \r\n          placeholder=\"Password\" \r\n        />\r\n        <button type=\"submit\">Sign Up</button>\r\n        {signInError && <p style={{ color: 'grey' }}>{signInError}</p>} {/* Display the error message */}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default SignUp;\r\n"],"names":["_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","signInError","setSignInError","navigate","useNavigate","setUser","useContext","AuthContext","handleSignUp","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","userCredential","localData","userData","errorMessage","wrap","_context","prev","next","preventDefault","createUserWithEmailAndPassword","auth","sent","user","localStorage","getItem","JSON","parse","console","log","setDoc","doc","firestore","uid","t0","error","t1","code","stop","_x","apply","arguments","_jsxs","children","_jsx","onSubmit","htmlFor","id","type","name","autoComplete","value","onChange","target","placeholder","style","color"],"sourceRoot":""}